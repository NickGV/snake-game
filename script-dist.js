!function(){const t=document.querySelector(".up"),i=document.querySelector(".down"),h=document.querySelector(".left"),e=document.querySelector(".right");class s{static get(t,i){return Math.floor(Math.random()*i)+t}}class d{constructor(t,i){this.x=t,this.y=i,this.width=15,this.height=15}draw(){c.fillStyle="red",c.fillRect(this.x,this.y,this.width,this.height)}static generate(){return new d(s.get(0,500),s.get(0,300))}}class r{constructor(t,i){this.x=t,this.y=i,this.width=15,this.height=15,this.back=null}draw(){c.fillStyle="black",c.fillRect(this.x,this.y,this.width,this.height),this.hasBack()&&this.back.draw()}add(){if(this.hasBack())return this.back.add();this.back=new r(this.x,this.y)}hasBack(){return null!==this.back}copy(){this.hasBack()&&(this.back.copy(),this.back.x=this.x,this.back.y=this.y)}right(){this.copy(),this.x+=10}left(){this.copy(),this.x-=10}up(){this.copy(),this.y-=10}down(){this.copy(),this.y+=10}hit(t,i=!1){return!(this===t&&!this.hasBack())&&(this===t?this.back.hit(t,!0):!(i&&!this.hasBack())&&(i?this.back.hit(t):this.hasBack()?y(this,t)||this.back.hit(t):y(this,t)))}hitBorder(){return this.x>490||this.x<0||this.y>290||this.y<0}}const n=document.getElementById("canvas"),c=n.getContext("2d");const a=new class{constructor(){this.head=new r(100,0),this.draw(),this.direction="right",this.head.add(),this.head.add(),this.head.add(),this.head.add()}draw(){this.head.draw()}right(){"left"!=this.direction&&(this.direction="right")}left(){"right"!=this.direction&&(this.direction="left")}up(){"down"!=this.direction&&(this.direction="up")}down(){"up"!=this.direction&&(this.direction="down")}move(){"up"==this.direction&&this.head.up(),"down"==this.direction&&this.head.down(),"right"==this.direction&&this.head.right(),"left"==this.direction&&this.head.left()}eat(){this.head.add()}dead(){return this.head.hit(this.head)||this.head.hitBorder()}};let o=[];window.addEventListener("keydown",(function(t){return t.preventDefault(),"ArrowDown"==t.key?a.down():"ArrowRight"==t.key?a.right():"ArrowUp"==t.key?a.up():"ArrowLeft"==t.key&&a.left()})),t.addEventListener("click",(()=>{a.up()})),i.addEventListener("click",(()=>{a.down()})),h.addEventListener("click",(()=>{a.left()})),e.addEventListener("click",(()=>{a.right()}));const l=setInterval((()=>{a.move(),c.clearRect(0,0,n.width,n.height),a.draw(),function(){for(const t in o){const i=o[t];void 0!==i&&(i.draw(),w(i,a.head)&&(a.eat(),u(i)))}}(),a.dead()&&(console.log("se acabo"),window.clearInterval(l))}),100);function u(t){o=o.filter((function(i){return t!==i}))}function y(t,i){return t.x==i.x&&t.y==i.y}function w(t,i){var h=!1;return i.x+i.width>=t.x&&i.x<t.x+t.width&&i.y+i.height>=t.y&&i.y<t.y+t.height&&(h=!0),i.x<=t.x&&i.x+i.width>=t.x+t.width&&i.y<=t.y&&i.y+i.height>=t.y+t.height&&(h=!0),t.x<=i.x&&t.x+t.width>=i.x+i.width&&t.y<=i.y&&t.y+t.height>=i.y+i.height&&(h=!0),h}setInterval((()=>{const t=d.generate();o.push(t),setTimeout((function(){u(t)}),1e4)}),4e3)}();